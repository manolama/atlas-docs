



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://netflix.github.io/atlas-docs/overview/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Overview - Atlas Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-82153845-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#history" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://netflix.github.io/atlas-docs/" title="Atlas Docs" class="md-header-nav__button md-logo">
          
            <img src="../images/atlas_logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Atlas Docs
            </span>
            <span class="md-header-nav__topic">
              
                Overview
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/Netflix/atlas-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href=".." title="Home" class="md-tabs__link md-tabs__link--active">
          Home
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../api/fetch/" title="API" class="md-tabs__link">
          API
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../asl/tutorial/" title="Stack Language" class="md-tabs__link">
          Stack Language
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../spectator/" title="Spectator" class="md-tabs__link">
          Spectator
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://netflix.github.io/atlas-docs/" title="Atlas Docs" class="md-nav__button md-logo">
      
        <img src="../images/atlas_logo.svg" width="48" height="48">
      
    </a>
    Atlas Docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/Netflix/atlas-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
    
    <label class="md-nav__link" for="nav-1">
      Home
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Home
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="./" title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#history" title="History" class="md-nav__link">
    History
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goals" title="Goals" class="md-nav__link">
    Goals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-api" title="Common API" class="md-nav__link">
    Common API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scale" title="Scale" class="md-nav__link">
    Scale
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dimensionality" title="Dimensionality" class="md-nav__link">
    Dimensionality
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-layer" title="Query Layer" class="md-nav__link">
    Query Layer
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stack-language" title="Stack Language" class="md-nav__link">
    Stack Language
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graph-example" title="Graph Example" class="md-nav__link">
    Graph Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-storage" title="Memory Storage" class="md-nav__link">
    Memory Storage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#speed" title="Speed" class="md-nav__link">
    Speed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resilience" title="Resilience" class="md-nav__link">
    Resilience
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cost" title="Cost" class="md-nav__link">
    Cost
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecosystem" title="Ecosystem" class="md-nav__link">
    Ecosystem
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/fetch/" title="Fetch" class="md-nav__link">
      Fetch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/graph/" title="Graph" class="md-nav__link">
      Graph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/tags/" title="Tags" class="md-nav__link">
      Tags
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Stack Language
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Stack Language
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../asl/tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../asl/alerting-expressions/" title="Alerting Expressions" class="md-nav__link">
      Alerting Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-1" type="checkbox" id="nav-3-3-1">
    
    <label class="md-nav__link" for="nav-3-3-1">
      Choosing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-1">
        Choosing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../asl/ref/and/" title="and" class="md-nav__link">
      and
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../asl/ref/eq/" title="eq" class="md-nav__link">
      eq
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-2" type="checkbox" id="nav-3-3-2">
    
    <label class="md-nav__link" for="nav-3-3-2">
      Math
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-2">
        Math
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../asl/ref/and/" title="and" class="md-nav__link">
      and
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Spectator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Spectator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Core Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Core Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/time-series/" title="Time Series" class="md-nav__link">
      Time Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/normalization/" title="Normalization" class="md-nav__link">
      Normalization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/naming/" title="Naming" class="md-nav__link">
      Naming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/clock/" title="Clock" class="md-nav__link">
      Clock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2-5" type="checkbox" id="nav-4-2-5">
    
    <label class="md-nav__link" for="nav-4-2-5">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-2-5">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/core/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Languages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Languages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-2" type="checkbox" id="nav-4-3-2">
    
    <label class="md-nav__link" for="nav-4-3-2">
      C++
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-2">
        C++
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/cpp/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-2-2" type="checkbox" id="nav-4-3-2-2">
    
    <label class="md-nav__link" for="nav-4-3-2-2">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-2-2">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/cpp/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/cpp/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/cpp/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/cpp/meters/percentile-timer/" title="Percentile Timers" class="md-nav__link">
      Percentile Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/cpp/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-3" type="checkbox" id="nav-4-3-3">
    
    <label class="md-nav__link" for="nav-4-3-3">
      Go
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-3">
        Go
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/go/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-3-2" type="checkbox" id="nav-4-3-3-2">
    
    <label class="md-nav__link" for="nav-4-3-3-2">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-3-2">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/go/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/go/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/go/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/go/meters/percentile-timer/" title="Percentile Timers" class="md-nav__link">
      Percentile Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/go/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-4" type="checkbox" id="nav-4-3-4">
    
    <label class="md-nav__link" for="nav-4-3-4">
      Java
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-4">
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-4-2" type="checkbox" id="nav-4-3-4-2">
    
    <label class="md-nav__link" for="nav-4-3-4-2">
      Registry
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-4-2">
        Registry
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/registry/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/registry/metrics3/" title="Metrics3" class="md-nav__link">
      Metrics3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-4-3" type="checkbox" id="nav-4-3-4-3">
    
    <label class="md-nav__link" for="nav-4-3-4-3">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-4-3">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/meters/percentile-timer/" title="Percentile Timers" class="md-nav__link">
      Percentile Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-4-4" type="checkbox" id="nav-4-3-4-4">
    
    <label class="md-nav__link" for="nav-4-3-4-4">
      Extensions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-4-4">
        Extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-4-4-1" type="checkbox" id="nav-4-3-4-4-1">
    
    <label class="md-nav__link" for="nav-4-3-4-4-1">
      JVM Stats
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-4-4-1">
        JVM Stats
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/jvm-buffer-pools/" title="Buffer Pools" class="md-nav__link">
      Buffer Pools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/jvm-gc/" title="Garbage Collection" class="md-nav__link">
      Garbage Collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/jvm-gc-causes/" title="GC Causes" class="md-nav__link">
      GC Causes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/jvm-memory-pools/" title="Memory Pools" class="md-nav__link">
      Memory Pools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/thread-pools/" title="Thread Pools" class="md-nav__link">
      Thread Pools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/log4j2/" title="Log4j2 Appender" class="md-nav__link">
      Log4j2 Appender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/log4j1/" title="Log4j1 Appender" class="md-nav__link">
      Log4j1 Appender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/ext/placeholders/" title="Placeholders" class="md-nav__link">
      Placeholders
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/java/servo-migration/" title="Servo Migration" class="md-nav__link">
      Servo Migration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-5" type="checkbox" id="nav-4-3-5">
    
    <label class="md-nav__link" for="nav-4-3-5">
      Node.js
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-5">
        Node.js
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-5-2" type="checkbox" id="nav-4-3-5-2">
    
    <label class="md-nav__link" for="nav-4-3-5-2">
      Extensions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-5-2">
        Extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-5-2-1" type="checkbox" id="nav-4-3-5-2-1">
    
    <label class="md-nav__link" for="nav-4-3-5-2-1">
      Node.js Stats
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-4-3-5-2-1">
        Node.js Stats
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-cpu/" title="CPU" class="md-nav__link">
      CPU
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-eventloop/" title="Event Loop" class="md-nav__link">
      Event Loop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-filedescriptor/" title="File Descriptor" class="md-nav__link">
      File Descriptor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-gc/" title="Garbarge Collection" class="md-nav__link">
      Garbarge Collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-heap/" title="Heap" class="md-nav__link">
      Heap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-heapspace/" title="Heap Space" class="md-nav__link">
      Heap Space
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/ext/nodejs-memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-5-3" type="checkbox" id="nav-4-3-5-3">
    
    <label class="md-nav__link" for="nav-4-3-5-3">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-5-3">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/meters/percentile-timer/" title="Percentile Timers" class="md-nav__link">
      Percentile Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/nodejs/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-6" type="checkbox" id="nav-4-3-6">
    
    <label class="md-nav__link" for="nav-4-3-6">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-6">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/py/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-6-2" type="checkbox" id="nav-4-3-6-2">
    
    <label class="md-nav__link" for="nav-4-3-6-2">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-6-2">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/py/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/py/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/py/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/py/meters/percentile-timer/" title="Percentile Timers" class="md-nav__link">
      Percentile Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/py/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-7" type="checkbox" id="nav-4-3-7">
    
    <label class="md-nav__link" for="nav-4-3-7">
      Ruby
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-7">
        Ruby
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/rb/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-7-2" type="checkbox" id="nav-4-3-7-2">
    
    <label class="md-nav__link" for="nav-4-3-7-2">
      Meters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-3-7-2">
        Meters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/rb/meters/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/rb/meters/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/rb/meters/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/rb/meters/percentile-timer/" title="Percentile Timers" class="md-nav__link">
      Percentile Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/lang/rb/meters/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Patterns
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Patterns
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/patterns/cardinality-limiter/" title="Cardinality Limiter" class="md-nav__link">
      Cardinality Limiter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/patterns/gauge-poller/" title="Gauge Poller" class="md-nav__link">
      Gauge Poller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/patterns/interval-counter/" title="Interval Counter" class="md-nav__link">
      Interval Counter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/patterns/long-task-timer/" title="Long Task Timer" class="md-nav__link">
      Long Task Timer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/patterns/percentile-timer/" title="Percentile Timer" class="md-nav__link">
      Percentile Timer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/patterns/polled-meter/" title="Polled Meter" class="md-nav__link">
      Polled Meter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Specifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Specifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spectator/specs/ipc/" title="IPC" class="md-nav__link">
      IPC
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#history" title="History" class="md-nav__link">
    History
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goals" title="Goals" class="md-nav__link">
    Goals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-api" title="Common API" class="md-nav__link">
    Common API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scale" title="Scale" class="md-nav__link">
    Scale
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dimensionality" title="Dimensionality" class="md-nav__link">
    Dimensionality
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-layer" title="Query Layer" class="md-nav__link">
    Query Layer
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stack-language" title="Stack Language" class="md-nav__link">
    Stack Language
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#graph-example" title="Graph Example" class="md-nav__link">
    Graph Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-storage" title="Memory Storage" class="md-nav__link">
    Memory Storage
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#speed" title="Speed" class="md-nav__link">
    Speed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resilience" title="Resilience" class="md-nav__link">
    Resilience
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cost" title="Cost" class="md-nav__link">
    Cost
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecosystem" title="Ecosystem" class="md-nav__link">
    Ecosystem
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Netflix/atlas-docs/edit/master/docs/overview.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Overview</h1>
                
                <p>Atlas is the system Netflix uses to manage dimensional time-series data for near real-time
operational insight. It was primarily created to address issues with scale and query capability
in the previous system.</p>
<h2 id="history">History<a class="headerlink" href="#history" title="Permanent link">&para;</a></h2>
<p>In May of 2011, Netflix was using a home-grown solution called Epic to manage time-series data.
Epic was a combination of perl CGI scripts, RRDTool logging, and MySQL. We were tracking around
2M distinct time series and the monitoring system was regularly failing to keep up with the volume
of data. In addition there were a number of trends in the company which presaged a drastic
increase in metric volume:</p>
<ul>
<li>Rolling pushes to <a href="http://techblog.netflix.com/2012/06/asgard-web-based-cloud-management-and.html">Red/Black deployments</a>.</li>
<li>Leveraging <a href="http://techblog.netflix.com/2012/01/auto-scaling-in-amazon-cloud.html">auto-scaling for large clusters</a>.
  Netflix has always used auto-scaling groups in AWS, but initially most were configured with fixed
  size and just used as a group and to replace instances.</li>
<li>Expansion internationally into <a href="http://blog.netflix.com/2011/07/netflix-is-coming-to-latin-america.html">Latin America</a>
  and <a href="http://ukirelandblog.netflix.com/2012_01_01_archive.html">Europe</a>. This led to an increase
  in the number of countries being tracked for key metrics and for Europe it was the first move
  into additional AWS regions. With additional regions we also wanted to have better isolation so
  a problem with monitoring in one region would not impact another, but at the same time have
  a mechanism to provide a global view if needed.</li>
</ul>
<p>Since that time the metric volume has continued to grow quickly. The graph below shows the increase
in metrics measured over last few years:</p>
<p><img alt="Number of metrics" src="../images/atlas_number_of_metrics.svg" /></p>
<p>The growth in raw volume required increased query capability to actually use the data.</p>
<h2 id="goals">Goals<a class="headerlink" href="#goals" title="Permanent link">&para;</a></h2>
<p>The main goals for Atlas were to build a system that provided:</p>
<ul>
<li>A Common API</li>
<li>Scale</li>
<li>Dimensionality</li>
</ul>
<h3 id="common-api">Common API<a class="headerlink" href="#common-api" title="Permanent link">&para;</a></h3>
<p>Epic did a number of things really well that we didn't want to lose when transitioning. In particular:</p>
<ul>
<li>Normalization and consolidation</li>
<li>Flexible legends that scale independently of the chart</li>
<li>Math, especially handling of NaN values representing no data</li>
<li>Holt-Winters used for alerting</li>
<li>Visualization options</li>
<li>Deep linking</li>
</ul>
<p>Many of these are capabilities that are provided by the RRDTool library Epic was using, but most
alternatives we looked at fell short in these categories. In addition, we have uses for other 3rd
party services like CloudWatch and it is desirable to have common query capability for that data.</p>
<h3 id="scale">Scale<a class="headerlink" href="#scale" title="Permanent link">&para;</a></h3>
<p>As indicated in the history section, metrics volume was growing and we needed a system that could
keep up. For a long time our biggest concern was write volume, however, we also wanted to scale
in terms of the amount of data we could read or aggregate as part of a graph request.</p>
<h3 id="dimensionality">Dimensionality<a class="headerlink" href="#dimensionality" title="Permanent link">&para;</a></h3>
<p>This is a decision that was made because users were already doing it in ways that were hard to
support. Epic only support a simple name with some special case system dimensions of cluster and
node. Many users were creating names like:</p>
<div class="codehilite"><pre><span></span><span class="n">com</span><span class="p">.</span><span class="n">netflix</span><span class="p">.</span><span class="n">eds</span><span class="p">.</span><span class="n">nccp</span><span class="p">.</span><span class="n">successful</span><span class="p">.</span><span class="n">requests</span><span class="p">.</span><span class="n">uiversion</span><span class="p">.</span><span class="n">nccprt</span><span class="o">-</span><span class="k">authorization</span><span class="p">.</span><span class="n">devtypid</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="n">clver</span><span class="o">-</span><span class="n">PHL_0AB</span><span class="p">.</span><span class="n">uiver</span><span class="o">-</span><span class="n">UI_169_mid</span><span class="p">.</span><span class="n">geo</span><span class="o">-</span><span class="n">US</span>
</pre></div>

<p>That breaks down to:</p>
<table>
<thead>
<tr>
<th><em>Key</em></th>
<th><em>Value</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>com.netflix.eds.nccp.successful.requests.uiversion</td>
</tr>
<tr>
<td>nccprt</td>
<td>authorization</td>
</tr>
<tr>
<td>devtypid</td>
<td>101</td>
</tr>
<tr>
<td>clver</td>
<td>PHL_0AB</td>
</tr>
<tr>
<td>uiver</td>
<td>UI_169_mid</td>
</tr>
<tr>
<td>geo</td>
<td>US</td>
</tr>
</tbody>
</table>
<p>Since it was all mangled into a name with different conventions by team, users would have to resort
to complex regular expressions to slice and dice the data based on the dimensions.</p>
<h2 id="query-layer">Query Layer<a class="headerlink" href="#query-layer" title="Permanent link">&para;</a></h2>
<p>In order to get a common API, have flexibility for backend implementations, and provide merged
views across backends we built a query layer that can be hierarchically composed. The diagram below
shows the main Netflix setup:</p>
<p><img alt="Query hierarchy" src="../images/atlas_query_hierarchy.svg" /></p>
<p>We have isolated regional deployments in each region we operate in as well as a global deployment
that can combine the results from multiple regions. The query and aggregation operations can be
performed on the fan out so most of the big summarization operations will distribute the
computation across the tree and typically to an optimized storage layer at some point.</p>
<p>Allowing the query and rendering layer to work on multiple backends also makes it easier for us to
consider transitioning to other backends in the future such as OpenTSDB or InfluxDB. Switching to
Atlas one of the biggest hurdles was compatibility and transitioning to the new system.</p>
<h3 id="stack-language">Stack Language<a class="headerlink" href="#stack-language" title="Permanent link">&para;</a></h3>
<p>One of our key requirements was to be able to have deep links into a particular chart and to be
able to reliably pass around or embed these images via email, wikis, html pages, etc. In addition,
the user who receives the link should be able to tweak the result. Atlas uses a simple stack
language that has a minimal punctuation and allows arbitrarily complex graph expressions to be
encoded in a URL friendly way. This means that all images can be accessed using a GET request.
The stack language is also simple to parse and interpret, allowing it to be easily consumed from a
variety of tools. The core features include:</p>
<ul>
<li>Embedding and linking using a GET request</li>
<li>URL friendly stack language<ul>
<li>Few special symbols (comma, colon, parenthesis)</li>
<li>Easy to extend</li>
</ul>
</li>
<li>Basic operations<ul>
<li>Query: and, or, equal, regex, has key, not</li>
<li>Aggregation: sum, count, min, max, group by</li>
<li>Consolidation: aggregate across time</li>
<li>Math: add, subtract, multiply, etc</li>
<li>Boolean: and, or, lt, gt, etc</li>
<li>Graph settings: legends, area, transparency</li>
</ul>
</li>
</ul>
<h3 id="graph-example">Graph Example<a class="headerlink" href="#graph-example" title="Permanent link">&para;</a></h3>
<p>To illustrate, this is a sample graph image:</p>
<p><img alt="Alert example" src="../images/stack_alert_example.png" /></p>
<p>This graph shows the number of requests per second and compares that with a prediction line
generated using <a href="DES">double exponential smoothing</a>. If the number of requests per second falls
below the prediction, it indicates an alert would trigger using the vertical spans. The url to
generate this image follows (newlines added for readability):</p>
<div class="codehilite"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">atlas</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">graph</span>
  <span class="o">?</span><span class="n">tz</span><span class="o">=</span><span class="n">UTC</span>
  <span class="o">&amp;</span><span class="n">e</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T08</span><span class="p">:</span><span class="mi">00</span>
  <span class="o">&amp;</span><span class="n">s</span><span class="o">=</span><span class="n">e</span><span class="o">-</span><span class="mi">8</span><span class="n">h</span>
  <span class="o">&amp;</span><span class="n">w</span><span class="o">=</span><span class="mi">500</span>
  <span class="o">&amp;</span><span class="n">h</span><span class="o">=</span><span class="mi">150</span>
  <span class="o">&amp;</span><span class="n">l</span><span class="o">=</span><span class="mi">0</span>
  <span class="o">&amp;</span><span class="n">q</span><span class="o">=</span><span class="n">nf</span><span class="p">.</span><span class="k">cluster</span><span class="p">,</span><span class="n">alerttest</span><span class="p">,:</span><span class="n">eq</span><span class="p">,</span>
     <span class="n">name</span><span class="p">,</span><span class="n">requestsPerSecond</span><span class="p">,:</span><span class="n">eq</span><span class="p">,:</span><span class="k">and</span><span class="p">,</span>
     <span class="p">:</span><span class="k">sum</span><span class="p">,</span>
     <span class="p">:</span><span class="n">dup</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="p">,:</span><span class="n">des</span><span class="p">,</span>
     <span class="mi">0</span><span class="p">.</span><span class="mi">85</span><span class="p">,:</span><span class="n">mul</span><span class="p">,</span>
     <span class="p">:</span><span class="mi">2</span><span class="n">over</span><span class="p">,:</span><span class="n">lt</span><span class="p">,</span>
     <span class="p">:</span><span class="n">rot</span><span class="p">,</span><span class="err">$</span><span class="n">name</span><span class="p">,:</span><span class="n">legend</span><span class="p">,</span>
     <span class="p">:</span><span class="n">rot</span><span class="p">,</span><span class="n">prediction</span><span class="p">,:</span><span class="n">legend</span><span class="p">,</span>
     <span class="p">:</span><span class="n">rot</span><span class="p">,:</span><span class="n">vspan</span><span class="p">,</span><span class="mi">60</span><span class="p">,:</span><span class="n">alpha</span><span class="p">,</span><span class="n">alert</span><span class="o">+</span><span class="n">triggered</span><span class="p">,:</span><span class="n">legend</span>
</pre></div>

<p>Adding some comments to the stack expression to explain a bit what is going on:</p>
<div class="codehilite"><pre><span></span># <span class="nv">Query</span> <span class="nv">to</span> <span class="nv">generate</span> <span class="nv">the</span> <span class="nv">input</span> <span class="nv">line</span>
<span class="nv">nf</span>.<span class="nv">cluster</span>,<span class="nv">alerttest</span>,:<span class="nv">eq</span>,
<span class="nv">name</span>,<span class="nv">requestsPerSecond</span>,:<span class="nv">eq</span>,:<span class="nv">and</span>,
<span class="nl">:sum</span>,

# <span class="nv">Create</span> <span class="nv">a</span> <span class="nv">copy</span> <span class="nv">on</span> <span class="nv">the</span> <span class="nv">stack</span>
<span class="nl">:dup</span>,

# <span class="nv">Apply</span> <span class="nv">a</span> <span class="nv">DES</span> <span class="nv">function</span> <span class="nv">to</span> <span class="nv">generate</span> <span class="nv">a</span> <span class="nv">prediction</span>
# <span class="nv">using</span> <span class="nv">the</span> <span class="nv">copy</span> <span class="nv">on</span> <span class="nv">the</span> <span class="nv">top</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">stack</span>. <span class="k">For</span>
# <span class="nv">a</span> <span class="nv">description</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">parameters</span> <span class="nv">see</span> <span class="nv">the</span> <span class="nv">DES</span>
# <span class="nv">reference</span> <span class="nv">page</span>.
<span class="mi">10</span>,<span class="mi">0</span>.<span class="mi">1</span>,<span class="mi">0</span>.<span class="mi">02</span>,:<span class="nv">des</span>,

# <span class="nv">Used</span> <span class="nv">to</span> <span class="nv">set</span> <span class="nv">a</span> <span class="nv">threshold</span>. <span class="nv">The</span> <span class="nv">prediction</span> <span class="nv">should</span>
# <span class="nv">be</span> <span class="nv">roughly</span> <span class="nv">equal</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">line</span>, <span class="nv">in</span> <span class="nv">this</span> <span class="nv">case</span> <span class="nv">the</span>
# <span class="nv">threshold</span> <span class="nv">would</span> <span class="nv">be</span> <span class="mi">85</span><span class="o">%</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">prediction</span>.
<span class="mi">0</span>.<span class="mi">85</span>,:<span class="nv">mul</span>,

# <span class="nv">Before</span>              <span class="nv">After</span>
# <span class="mi">4</span>.                  <span class="mi">4</span>. <span class="nv">actual</span>
# <span class="mi">3</span>.                  <span class="mi">3</span>. <span class="nv">prediction</span>
# <span class="mi">2</span>. <span class="nv">actual</span>           <span class="mi">2</span>. <span class="nv">actual</span>
# <span class="mi">1</span>. <span class="nv">prediction</span>       <span class="mi">1</span>. <span class="nv">prediction</span>
<span class="nl">:2over</span>,

# <span class="nv">Create</span> <span class="nv">a</span> <span class="nv">boolean</span> <span class="nv">signal</span> <span class="nv">line</span> <span class="nv">that</span> <span class="nv">is</span> <span class="mi">1</span>
# <span class="k">for</span> <span class="nv">datapoints</span> <span class="nv">where</span> <span class="nv">the</span> <span class="nv">actual</span> <span class="nv">value</span> <span class="nv">is</span>
# <span class="nv">less</span> <span class="nv">than</span> <span class="nv">the</span> <span class="nv">prediction</span> <span class="nv">and</span> <span class="mi">0</span> <span class="nv">where</span> <span class="nv">it</span>
# <span class="nv">is</span> <span class="nv">greater</span> <span class="nv">than</span> <span class="nv">or</span> <span class="nv">equal</span> <span class="nv">the</span> <span class="nv">prediction</span>.
# <span class="nv">The</span> <span class="mi">1</span> <span class="nv">values</span> <span class="nv">are</span> <span class="nv">where</span> <span class="nv">the</span> <span class="nv">alert</span> <span class="nv">should</span>
# <span class="nv">trigger</span>.
<span class="nl">:lt</span>,

# <span class="nv">Apply</span> <span class="nv">presentation</span> <span class="nv">details</span>.
<span class="nl">:rot</span>,$<span class="nv">name</span>,:<span class="nv">legend</span>,
<span class="nl">:rot</span>,<span class="nv">prediction</span>,:<span class="nv">legend</span>,
<span class="nl">:rot</span>,:<span class="nv">vspan</span>,<span class="mi">60</span>,:<span class="nv">alpha</span>,<span class="nv">alert</span><span class="o">+</span><span class="nv">triggered</span>,:<span class="nv">legend</span>
</pre></div>

<p>See the <a href="Stack Language">stack language</a> page for more information.</p>
<h2 id="memory-storage">Memory Storage<a class="headerlink" href="#memory-storage" title="Permanent link">&para;</a></h2>
<p>Storage for Atlas has been a bit of a sore point. We have tried many backends and ended up moving
more and more to a model where pretty much all data is stored in memory either in or off the java
heap.</p>
<h3 id="speed">Speed<a class="headerlink" href="#speed" title="Permanent link">&para;</a></h3>
<p>The primary goal for Atlas is to support queries over dimensional time series data so we can slice
and dice to drill down into problems. This means we frequently have a need to perform a large
aggregations that involve many data points even though the final result set might be small.</p>
<p>As an example consider a simple graph showing the number of requests per second hitting a service
for the last 3 hours. Assuming minute resolution that is 180 datapoints for the final output. On a
typical service we would get one time series per node showing the number of requests so if we have
100 nodes the intermediate result set is around 18k datapoints. For one service users went hog wild
with dimensions breaking down requests by device (~1000s) and country (~50) leading to about 50k
time series per node. If we still assume 100 nodes that is about 900M datapoints for the same 3h
line.</p>
<p>Though obviously we have to be mindful about the explosion of dimensions, we also want that where
possible to be a decision based on cost and business value rather than a technical limitation.</p>
<h3 id="resilience">Resilience<a class="headerlink" href="#resilience" title="Permanent link">&para;</a></h3>
<p>What all has to be working in order for the monitoring system to work? If it falls over what is
involved in getting it back up? Our focus is primarily operational insight so the top priority is
to be able to determine what is going on right now. This leads to the following rules of thumb:</p>
<ul>
<li>Data becomes exponentially less important as it gets older</li>
<li>Restoring service is more important than preventing data loss</li>
<li>Try to degrade gracefully</li>
</ul>
<p>As a result the internal Atlas deployment breaks up the data into multiple windows based on the
window of data they contain.</p>
<p><img alt="Storage at netflix" src="../images/atlas_storage_at_netflix.svg" /></p>
<p>With this setup we can show the last 6h of data as long as clients can successfully publish. The
data is all in memory sharded across machines in the 6h clusters. Because the data and index are
all in memory on the local node each instance is self contained and doesn't need any external
service to function. We typically run multiple mirrors of the 6h cluster so data is replicated and
we can handle loss of an instance. In AWS we run each mirror in a different zone so that a zone
failure will only impact a single mirror.</p>
<p>The publish cluster needs to know all of the instance in the mirror cluster and takes care of
splitting the traffic up so it goes to the correct shard. The set of mirror instances and shards
are assigned based on slots from the <a href="https://github.com/Netflix/edda">Edda</a>
<a href="https://github.com/Netflix/edda/wiki/REST#groupautoScalingGroups">autoScalingGroups API</a>. Since
the set of instances for the mirrors change rarely, the publish instances can cache the Edda
response and still retain successfully publish most data if Edda fails. If an instance is replaced
and we can't update data we would have partial loss for a single shard if the same shard was
missing in another mirror.</p>
<p>Historical data can also fail in which case graphs would not be able to show data for some older
windows. This doesn't have to be fully continuous, for example a common use case for us is to look
at week-over-week (WoW) charts even though the span of the chart might only be a few hours. If the
<code>&lt; 4d</code> cluster fails but the <code>&lt; 16d</code> cluster is functioning we could still serve that graph even
though we couldn't show a continuous graph for the full week. A graph would still be shown but
would be missing data in the middle.</p>
<p>After data is written to the mirrors, they will flush to a persistence layer that is responsible
for writing the data to the long term storage in S3. The data at full resolution is kept in S3 and
we use hadoop (Elastic MapReduce) for processing the data to perform corrective merging of data
from the mirrors, generate reports, and perform rollups into a form that can be loaded into the
historical clusters.</p>
<h3 id="cost">Cost<a class="headerlink" href="#cost" title="Permanent link">&para;</a></h3>
<p>Keeping all data in memory is expensive in-particular with the large growth rate of data. The
combination of dimensionality and time based partitioning used for resilience also give us a way
to help manage costs.</p>
<p>The first way is in controlling the number of replicas. In most cases we are using replicas for
redundancy not to provide additional query capacity. For historical data that can be reloaded from
stable storage we typically run only one replica as the duration of partial downtime was not deemed
to be worth the cost for an additional replica.</p>
<p>The second way is as part of the hadoop processing we can compute rollups so that we have a much
smaller data volume to load in historical clusters. At Netflix the typical policy is roughly:</p>
<table>
<thead>
<tr>
<th><em>Cluster</em></th>
<th><em>Policy</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; 6h</td>
<td>Keeps all data received</td>
</tr>
<tr>
<td>&lt; 4d ago</td>
<td>Keeps most data, we do early rollup by dropping the node dimension on some business metrics</td>
</tr>
<tr>
<td>&lt; 16d ago</td>
<td>Rollup by dropping the node dimension on all metrics</td>
</tr>
<tr>
<td>older</td>
<td>Explicit whitelist, typically recommend BI systems for these use-cases</td>
</tr>
</tbody>
</table>
<p>Using these policies we get greatly reduced index sizes for the number of distinct time series
despite a significant amount of churn. With auto-scaling and red/black deployment models the set
of instances change frequently so typically the intersection of distinct time series from one day
to the next is less than 50%. Rollups target the dimensions which lead to that churn giving us much
smaller index sizes. Also, in many cases dimensions like node that lead to this increase become
less relevant after the node goes away. Deep-dive or investigative use-cases can still access the
data using hadoop if needed.</p>
<p>Snapshot of index sizes for one region in our environment:</p>
<table>
<thead>
<tr>
<th>&lt; 6h</th>
<th>&lt; 4d</th>
<th>&lt; 16d</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="Size 6h" src="../images/atlas_scale_6h.png" /></td>
<td><img alt="Size 4d" src="../images/atlas_scale_4d.png" /></td>
<td><img alt="Size 16d" src="../images/atlas_scale_16d.png" /></td>
</tr>
</tbody>
</table>
<h2 id="ecosystem">Ecosystem<a class="headerlink" href="#ecosystem" title="Permanent link">&para;</a></h2>
<p>Internally there is a lot of tooling and infrastructure built up around Atlas. We are
planning to open source many of these tools as time permits. This project is the first step for
that with the query layer and some of the in-heap memory storage. Some additional parts that should
come in the future:</p>
<ul>
<li>User interfaces<ul>
<li>Main UI for browsing data and constructing queries.</li>
<li>Dashboards</li>
<li>Alerts</li>
</ul>
</li>
<li>Platform<ul>
<li>Inline aggregation of reported data before storage layer</li>
<li>Storage options using off-heap memory and lucene</li>
<li>Percentile backend</li>
<li>Publish and persistence applications</li>
<li>EMR processing for computing rollups and analysis</li>
<li>Poller for SNMP, healthchecks, etc</li>
</ul>
</li>
<li>Client<ul>
<li>Supports integrating servo with Atlas</li>
<li>Local rollups and alerting</li>
</ul>
</li>
<li>Analytics<ul>
<li>Metrics volume report</li>
<li><a href="http://www.infoq.com/presentations/canary-analysis-deployment-pattern">Canary analysis</a></li>
<li>Outlier and anomaly detection</li>
</ul>
</li>
</ul>
<p>These projects were originally developed and run internally and thus only needed to be setup by our
team and assume many internal infrastructure pieces to run. There is a goal to try and make this
easier, but it will take some time.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../api/fetch/" title="Fetch" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Fetch
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>